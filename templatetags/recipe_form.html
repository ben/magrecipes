{% verbatim %}
<script type="text/html" id="ingredientTemplate">
   <tr class="ingrediententry">
      <td><input class="ingredientautocomplete" data-bind="value: name, valueUpdate: 'afterkeydown'" /></td>
      <td><input data-bind="value: quantity" /></td>
      <td><input data-bind="value: note" /></td>
   </tr>
</script>

<script type="text/html" id="imageTemplate">
   <div class="imagethumb">
      <a href="#"
         onClick="$('#instructionstext').insertAtCaret('![](/image/${key}/575)');return false;"
         class="markdown-insert-link">
         <img src="/image/${key}/200" />
      </a>
   </div>
</script>

<script type="text/html" id="allIngredientsTemplate">
   <table id="ingredienttable">
      <colgroup>
         <col width="200"/>
         <col width="40"/>
         <col/>
      </colgroup>
      <thead><tr>
            <td>Name</td>
            <td>Amount</td>
            <td>Note</td>
      </tr></thead>
      <tbody data-bind="template: { name: 'ingredientTemplate', foreach: ingredients}">
      </tbody>
   </table>
</script>

<script type="text/html" id="monthTemplate">
   <div id="monthbuttonset">
      <input title="January" type="checkbox" name="January" id="January" data-bind="checked: January" />
      <label for="January">Jan</label>
      
      <input title="February" type="checkbox" name="February" id="February" data-bind="checked: February" />
      <label for="February">Feb</label>
      
      <input title="March" type="checkbox" name="March" id="March" data-bind="checked: March" />
      <label for="March">Mar</label>
      
      <input title="April" type="checkbox" name="April" id="April" data-bind="checked: April" />
      <label for="April">Apr</label>
      
      <input title="May" type="checkbox" name="May" id="May" data-bind="checked: May" />
      <label for="May">May</label>
      
      <input title="June" type="checkbox" name="June" id="June" data-bind="checked: June" />
      <label for="June">Jun</label>
      
      <input title="July" type="checkbox" name="July" id="July" data-bind="checked: July" />
      <label for="July">Jul</label>
      
      <input title="August" type="checkbox" name="August" id="August" data-bind="checked: August" />
      <label for="August">Aug</label>
      
      <input title="September" type="checkbox" name="September" id="September" data-bind="checked: September" />
      <label for="September">Sep</label>
      
      <input title="October" type="checkbox" name="October" id="October" data-bind="checked: October" />
      <label for="October">Oct</label>
      
      <input title="November" type="checkbox" name="November" id="November" data-bind="checked: November" />
      <label for="November">Nov</label>
      
      <input title="December" type="checkbox" name="December" id="December" data-bind="checked: December" />
      <label for="December">Dec</label>
   </div>
</script>
{% endverbatim %}

<! ---------------------------------------------------------------------- -->

<h2>Title:</h2>
<input id="titleentry" size="40" data-bind="value: title" />

<div id="seasonbar">
   <h3>Season:</h3>
   <div class="months" data-bind="template: 'monthTemplate'"></div>
   <div id="seasons">
      <a href="#" id="spring">Spring</a>
      <a href="#" id="summer">Summer</a>
      <a href="#" id="autumn">Autumn</a>
      <a href="#" id="winter">Winter</a>
      <a href="#" id="none">None</a>
      <a href="#" id="all">All</a>
   </div>
</div>

<h3>Yield:</h3>
<input size="40" data-bind="value: yeeld" />

<h3>Source:</h3>
<input size="40" data-bind="value: source" />

<h3>Ingredients:</h3>
<div id="ingredienttable">
   <div data-bind="template: 'allIngredientsTemplate'"></div>
</div>

<div id="instructions">
   <h3>Instructions:</h3>
   <textarea id="instructionstext" data-bind="value: instructions, valueUpdate: 'afterkeydown'"></textarea>
</div>

<input type="hidden" name="json" id="json" />

<input type="submit" value="Save" />

<h3>Preview:</h3>
<div class="recipe" data-bind="html: instructions_html"></div>

</form>

<form id="imageform" action="{{image_upload_url}}" method="post" enctype="multipart/form-data">
   <div id="imageupload">
      <div>
         <h3>Images</h3>
         <input type="file" name="photofile" />
         <input type="submit" id="fileupload" value="Upload image" />
      </div>

      <div id="recipeimages" data-bind="template: { name: 'imageTemplate', foreach: images}" />
   </div>
